function matrixToArray(e){return e.substr(7,e.length-8).split(", ")}function easeOutBack(e,t,a,i,n){return void 0==n&&(n=1.70158),a*((e=e/i-1)*e*((n+1)*e+n)+1)+t}function slideout(e,t){function g(){if(v=Date.now()-i,f)$(".itemslide_slideoutwrap").translate3d(0,n-easeOutBack(v,0,n-a,250,0)),e.savedSlide.css("opacity",l-easeOutBack(v,0,l-0,250,0)*(h?-1:1));else{if(h)return $(".itemslide_slideoutwrap").children().unwrap(),$(".itemslide_move").children().unwrap(),isExplorer&&e.children().css("height",""),e.end_animation=!0,void(v=0);$(".itemslide_move").translate3d(0-easeOutBack(v-250,0,0+e.savedSlide.width(),125,0)*(w?-1:1))}return 1==p&&($(".itemslide_slideoutwrap").children().unwrap(),e.savedSlideIndex==e.data("vars").currentIndex&&$(".itemslide_move").children(":nth-child(1)").attr("class","itemslide-active"),e.savedSlideIndex!=e.children().length-1||w||e.savedSlideIndex!=e.data("vars").currentIndex||(t.duration=200,e.gotoSlide(e.children().length-2)),0==e.savedSlideIndex&&0!=e.data("vars").currentIndex&&(v=500),p=-1),v>=250&&(f=!1,-1!=p&&(p=1),v>=375)?($(".itemslide_move").children().unwrap(),e.removeSlide(o.index()),(0==e.savedSlideIndex&&0!=e.data("vars").currentIndex||w)&&e.gotoWithoutAnimation(e.data("vars").currentIndex-1),t.duration=s,v=0,void(e.end_animation=!0)):void(d=requestAnimationFrame(g))}var o,u,a=-400,i=Date.now(),n=0,d=0,s=0,l=0;e.end_animation=!0;var h=!1;e.swipeOut=function(){n=$(".itemslide_slideoutwrap").translate3d().y,u=0>n,a=u?-400:400,Math.abs(0-n)<50?(h=!0,a=0):(h=!1,e.trigger({type:"swipeout",slide:e.savedSlideIndex})),p=0,s=t.duration,o=e.savedSlide,i=Date.now(),l=e.savedSlide.css("opacity"),e.savedSlideIndex<e.data("vars").currentIndex?(w=!0,e.children(":nth-child(-n+"+(e.savedSlideIndex+1)+")").wrapAll("<div class='itemslide_move' />")):(w=!1,e.children(":nth-child(n+"+(e.savedSlideIndex+2)+")").wrapAll("<div class='itemslide_move' />")),f=!0,e.end_animation=!1,d=requestAnimationFrame(g)};var f=!0,v=0,p=0,w=!1}var isExplorer=!1||!!document.documentMode;$(function(){"use strict";$.fn.itemslide=function(e){function I(e){if("touchmove"==e.type?(g=null==$.fn.jquery?e.changedTouches[0]:e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],Math.abs(g.pageX-f)>10&&(p=1),p&&e.preventDefault()):(g=e,e.preventDefault()),n=-(g.pageX-f)>0?1:-1,D()?m&&(x=g.pageX,m=0):(m||(o.currentLandPos=o.translate3d().x,f=g.pageX),m=1),1==_&&(isExplorer&&o.children().css("height",o.data("vars").slideHeight),o.savedSlide.wrapAll("<div class='itemslide_slideoutwrap' />"),_=-1),Math.abs(g.pageX-f)>6&&(!s&&o.end_animation&&(l=!0),cancelAnimationFrame(i)),Math.abs(g.pageY-v)>6&&!l&&o.end_animation&&(s=!0),l){if(u.disable_slide)return;s=!1,o.translate3d((0==m?x-f+(g.pageX-x)/4:g.pageX-f)+o.currentLandPos),o.trigger("changePos"),o.trigger("pan")}else s&&u.swipe_out&&(e.preventDefault(),$(".itemslide_slideoutwrap").translate3d(0,g.pageY-v),-1!=_&&(_=1))}function y(e){o.children(":nth-child("+(o.data("vars").currentIndex+1||0)+")").attr("class",""),o.children(":nth-child("+(e+1||0)+")").attr("class","itemslide-active"),e!=u.currentIndex&&(o.data("vars").currentIndex=e,o.trigger("changeActiveIndex"))}function b(e){for(var t=0;t<o.children("li").length;t++)if(o.children().cwidth()*t+o.children().cwidth()/2-o.children().cwidth()*u.pan_threshold*n-A(0)>e)return u.one_item?t!=o.data("vars").currentIndex?o.data("vars").currentIndex+1*n:o.data("vars").currentIndex:t;return u.one_item?o.data("vars").currentIndex+1:o.children("li").length-1}function A(e){return-(e*o.children().cwidth()-(o.parent().cwidth()-t-o.children().cwidth())/2)}function D(){return Math.floor(o.translate3d().x)>A(0)&&-1==n||Math.ceil(o.translate3d().x)<A(o.children("li").length-1)&&1==n}function F(e){e>=o.children("li").length-1||0>=e?(r=!0,e=Math.min(Math.max(e,0),o.children("li").length-1)):r=!1,y(e),k=Math.max(u.duration-1920/$(window).width()*Math.abs(o.data("vars").velocity)*9*(u.duration/230)-(D()?d/15:0)*(u.duration/230),50),M=r?250*Math.abs(o.data("vars").velocity)/$(window).width():0,a=o.translate3d().x,o.currentLandPos=A(e),cancelAnimationFrame(i),E=Date.now(),i=requestAnimationFrame(X)}function X(){var e=Date.now()-E;return o.trigger("changePos"),o.translate3d(a-easeOutBack(e,0,a-o.currentLandPos,k,M)),e>=k?void o.translate3d(o.currentLandPos):void(i=requestAnimationFrame(X))}var t=0,a=0,i=0,n=0,r=!1,d=0,s=!1,l=!1,o=this,c={duration:350,swipe_sensitivity:150,disable_slide:!1,disable_clicktoslide:!1,disable_scroll:!1,start:0,one_item:!1,pan_threshold:.3,disable_autowidth:!1,parent_width:!1,swipe_out:!1},u=$.extend({},c,e);u.parent_width&&o.children().width(o.parent().cwidth()),this.data("vars",{currentIndex:0,disable_autowidth:u.disable_autowidth,parent_width:u.parent_width,velocity:0,slideHeight:o.children().height()}),o.end_animation=!0,u.swipe_out&&slideout(o,u),t=parseInt(o.css("left").replace("px","")),o.css({"touch-action":"pan-y","-webkit-user-select":"none","-webkit-touch-callout":"none","-webkit-user-drag":"none","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"}),u.disable_autowidth||o.css("width",o.children("li").length*o.children().cwidth()+10),o.translate3d(0),F(u.start);var g,h=!1,f=0,v=0,p=!1,w=0;o.savedSlideIndex=0,o.on("mousedown touchstart","li",function(e){g="touchstart"==e.type?null==$.fn.jquery?e.changedTouches[0]:e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]:e,o.end_animation&&(w=Date.now(),h=1,p=0,f=g.pageX,v=g.pageY,s=!1,l=!1,o.savedSlide=$(this),o.savedSlideIndex=o.savedSlide.index(),_=0,$(window).on("mousemove touchmove",I),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty())});var m=!0,x=0,_=0;$(window).on("mouseup touchend",function(e){if(h){if(g="touchend"==e.type?null==$.fn.jquery?e.changedTouches[0]:e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]:e,h=!1,$(window).off("mousemove touchmove"),s&&u.swipe_out)return void o.swipeOut();if(o.end_animation&&!u.disable_slide){var t=Date.now()-w;if(o.data("vars").velocity=-(g.pageX-f)/t,n=o.data("vars").velocity>0?1:-1,d=(g.pageX-f)*n*-1,(g.pageX-f)*n<-6)return void F(b(o.data("vars").velocity*u.swipe_sensitivity-o.translate3d().x))}o.savedSlide.index()==o.data("vars").currentIndex||u.disable_clicktoslide||(e.preventDefault(),F(o.savedSlide.index()))}});try{o.mousewheel(function(e){if(!u.disable_scroll){o.data("vars").velocity=0;var t=o.data("vars").currentIndex-e.deltaY;if(t>=o.children("li").length||0>t)return;F(t),e.preventDefault()}})}catch(S){}o.on("gotoSlide",function(e,t){F(t)});var M=0,k=u.duration,E=Date.now();o.gotoWithoutAnimation=function(e){o.data("vars").currentIndex=e,o.currentLandPos=A(e),o.translate3d(A(e))}},$.fn.gotoSlide=function(e){this.trigger("gotoSlide",e)},$.fn.next=function(){this.gotoSlide(this.data("vars").currentIndex+1)},$.fn.previous=function(){this.gotoSlide(this.data("vars").currentIndex-1)},$.fn.reload=function(){this.data("vars").parent_width&&this.children().width(this.parent().cwidth()),this.data("vars").disable_autowidth||this.css("width",this.children("li").length*this.children().cwidth()+10),this.data("vars").slideHeight=this.children().height(),this.data("vars").velocity=0,this.gotoSlide(this.data("vars").currentIndex)},$.fn.addSlide=function(e){this.append("<li>"+e+"</li>"),this.reload()},$.fn.removeSlide=function(e){this.children(":nth-child("+(e+1||0)+")").remove()},$.fn.getActiveIndex=function(){return this.data("vars").currentIndex},$.fn.getCurrentPos=function(){return this.translate3d().x},$.fn.translate3d=function(e,t){if(null==e){var a=matrixToArray(this.css("transform"));if(null!=$.fn.jquery)return{x:parseFloat(isExplorer?a[12]:a[4]),y:parseFloat(isExplorer?a[13]:a[5])};var i=this.css("transform").replace("translate3d","").replace("(","").replace(")","").replace(" ","").replace("px","").split(",");return{x:parseFloat(i[0]),y:parseFloat(i[1])}}this.css("transform","translate3d("+e+"px,"+(t||0)+"px, 0px)")},$.fn.cwidth=function(){return parseInt(this.css("width").replace("px",""))}});
