function matrixToArray(e){return e.substr(7,e.length-8).split(", ")}function easeOutBack(e,t,i,n,a){return void 0==a&&(a=1.70158),i*((e=e/n-1)*e*((a+1)*e+a)+1)+t}function slideout(e,t){function i(){if(v=Date.now()-r,h)$(".itemslide_slideoutwrap").translate3d(0,s-easeOutBack(v,0,s-d,250,0)),e.savedSlide.css("opacity",c-easeOutBack(v,0,c-0,250,0)*(u?-1:1));else{if(u)return $(".itemslide_slideoutwrap").children().unwrap(),$(".itemslide_move").children().unwrap(),e.end_animation=!0,void(v=0);$(".itemslide_move").translate3d(0-easeOutBack(v-250,0,0+e.savedSlide.width(),125,0)*(w?-1:1))}return 1==m&&($(".itemslide_slideoutwrap").children().unwrap(),e.savedSlideIndex==e.data("vars").currentIndex&&$(".itemslide_move").children(":nth-child(1)").attr("id","active"),e.savedSlideIndex!=e.children().length-1||w||(t.duration=200,e.gotoSlide(e.children().length-2)),0==e.savedSlideIndex&&0!=e.data("vars").currentIndex&&(v=500),m=-1),v>=250&&(h=!1,-1!=m&&(m=1),v>=375)?($(".itemslide_move").children().unwrap(),e.removeSlide(n.index()),(0==e.savedSlideIndex&&0!=e.data("vars").currentIndex||w)&&e.gotoWithoutAnimation(e.data("vars").currentIndex-1),t.duration=l,v=0,void(e.end_animation=!0)):void(o=requestAnimationFrame(i))}var n,a,d=-400,r=Date.now(),s=0,o=0,l=0,c=0;e.end_animation=!0;var u=!1;e.swipeOut=function(){s=$(".itemslide_slideoutwrap").translate3d().y,a=0>s,d=a?-400:400,Math.abs(0-s)<50?(u=!0,d=0):u=!1,m=0,l=t.duration,n=e.savedSlide,r=Date.now(),c=e.savedSlide.css("opacity"),e.savedSlideIndex<e.data("vars").currentIndex?(w=!0,e.children(":lt("+e.savedSlideIndex+")").wrapAll("<div class='itemslide_move' />")):(w=!1,e.children(":gt("+e.savedSlideIndex+")").wrapAll("<div class='itemslide_move' />")),$(".itemslide_move").css("width",e.width()),$(".itemslide_move").css("height",e.height()),h=!0,e.end_animation=!1,o=requestAnimationFrame(i)};var h=!0,v=0,m=0,w=!1}!function(e){"use strict";var t=!1||!!document.documentMode;e.fn.initslide=function(e){console.log("Please do not use .initslide() as its deprecated - use .itemslide() instead"),this.itemslide(e)},e.fn.itemslide=function(t){function i(t){"touchmove"==t.type?(S=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],Math.abs(S.pageX-y)>10&&(A=1),A&&t.preventDefault()):(S=t,t.preventDefault()),x.trigger("changePos"),x.trigger("pan"),h=-(S.pageX-y)>0?1:-1,r()?M&&(X=S.pageX,M=0):(M||(x.currentLandPos=x.translate3d().x,y=S.pageX),M=1),1==P&&(x.savedSlide.wrapAll("<div class='itemslide_slideoutwrap' />"),e(".itemslide_slideoutwrap").children().height(_),P=-1),Math.abs(S.pageX-y)>6&&(!w&&x.end_animation&&(g=!0),cancelAnimationFrame(u)),Math.abs(S.pageY-b)>6&&!g&&x.end_animation&&(w=!0),g?(w=!1,x.translate3d((0==M?X-y+(S.pageX-X)/4:S.pageX-y)+x.currentLandPos)):w&&f.swipe_out&&(t.preventDefault(),e(".itemslide_slideoutwrap").translate3d(0,S.pageY-b),-1!=P&&(P=1))}function n(e){x.children(":nth-child("+(x.data("vars").currentIndex+1)+")").attr("id",""),x.children(":nth-child("+(e+1)+")").attr("id","active"),e!=f.currentIndex&&(x.data("vars").currentIndex=e,x.trigger("changeActiveIndex"))}function a(e){for(var t=0;t<x.children("li").length;t++)if(x.children(t).width()*t+x.children(t).width()/2-x.children(t).width()*f.pan_threshold*h-d(0)>e)return f.one_item?t!=x.data("vars").currentIndex?x.data("vars").currentIndex+1*h:x.data("vars").currentIndex:t;return f.one_item?x.data("vars").currentIndex+1:x.children("li").length-1}function d(e){return-(e*x.children("li").width()-(x.parent().width()-l-x.children("li").width())/2)}function r(){return Math.floor(x.translate3d().x)>d(0)&&-1==h||Math.ceil(x.translate3d().x)<d(x.children("li").length-1)&&1==h}function s(t){t>=x.children("li").length-1||0>=t?(v=!0,t=Math.min(Math.max(t,0),x.children("li").length-1)):v=!1,n(t),F=Math.max(f.duration-1920/e(window).width()*Math.abs(x.data("vars").velocity)*9*(f.duration/230)-(r()?m/15:0)*(f.duration/230),50),k=v?250*Math.abs(x.data("vars").velocity)/e(window).width():0,c=x.translate3d().x,x.currentLandPos=d(t),cancelAnimationFrame(u),O=Date.now(),u=requestAnimationFrame(o)}function o(){var e=Date.now()-O;return x.trigger("changePos"),x.translate3d(c-easeOutBack(e,0,c-x.currentLandPos,F,k)),e>=F?void x.translate3d(x.currentLandPos):void(u=requestAnimationFrame(o))}var l=0,c=0,u=0,h=0,v=!1,m=0,w=!1,g=!1,p={duration:350,swipe_sensitivity:150,disable_slide:!1,disable_scroll:!1,start:0,one_item:!1,pan_threshold:.3,disable_autowidth:!1,swipe_out:!1},f=e.extend({},p,t);this.data("vars",{currentIndex:0,disable_autowidth:f.disable_autowidth,velocity:0});var x=e(this),_=x.children().height();x.end_animation=!0,f.swipe_out&&slideout(x,f),l=parseInt(x.css("left").replace("px","")),x.css({"touch-action":"pan-y","-webkit-user-select":"none","-webkit-touch-callout":"none","-webkit-user-drag":"none","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"}),f.disable_autowidth||x.css("width",x.children("li").length*x.children("li").width()+10),x.translate3d(0),s(f.start);var S,I=!1,y=0,b=0,A=!1,D=0;x.savedSlideIndex=0,x.on("mousedown touchstart","li",function(t){if(!f.disable_slide){if(S="touchstart"==t.type?t.originalEvent.touches[0]||t.originalEvent.changedTouches[0]:t,!x.end_animation)return;D=Date.now(),I=1,A=0,y=S.pageX,b=S.pageY,w=!1,g=!1,x.savedSlide=e(this),x.savedSlideIndex=x.savedSlide.index(),P=0,e(window).on("mousemove touchmove",i),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}});var M=!0,X=0,P=0;e(window).on("mouseup touchend",function(t){if(!f.disable_slide&&I)if(S="touchend"==t.type?t.originalEvent.touches[0]||t.originalEvent.changedTouches[0]:t,I=!1,e(window).off("mousemove touchmove"),w&&f.swipe_out)x.swipeOut();else if(x.end_animation){var i=Date.now()-D;x.data("vars").velocity=-(S.pageX-y)/i,h=x.data("vars").velocity>0?1:-1,m=(S.pageX-y)*h*-1,(S.pageX-y)*h<-6?s(a(x.data("vars").velocity*f.swipe_sensitivity-x.translate3d().x)):x.savedSlide.index()!=x.data("vars").currentIndex&&(t.preventDefault(),s(x.savedSlide.index()))}});try{x.mousewheel(function(e){if(!f.disable_scroll){x.data("vars").velocity=0;var t=x.data("vars").currentIndex-e.deltaY;if(t>=x.children("li").length||0>t)return;s(t),e.preventDefault()}})}catch($){}x.on("gotoSlide",function(e,t){s(t)});var k=0,F=f.duration,O=Date.now();x.gotoWithoutAnimation=function(e){x.data("vars").currentIndex=e,x.currentLandPos=d(e),x.translate3d(d(e))}},e.fn.gotoSlide=function(e){this.trigger("gotoSlide",e)},e.fn.next=function(){this.gotoSlide(this.data("vars").currentIndex+1)},e.fn.previous=function(){this.gotoSlide(this.data("vars").currentIndex-1)},e.fn.reload=function(){this.data("vars").disable_autowidth||this.css("width",this.children("li").length*this.children("li").width()+10),this.data("vars").velocity=0,this.gotoSlide(this.data("vars").currentIndex)},e.fn.addSlide=function(e){this.append("<li>"+e+"</li>"),this.reload()},e.fn.removeSlide=function(e){this.children(":nth-child("+(e+1)+")").remove()},e.fn.getActiveIndex=function(){return this.data("vars").currentIndex},e.fn.getCurrentPos=function(){return this.translate3d().x},e.fn.translate3d=function(e,i){if(null==e){var n=matrixToArray(this.css("transform"));return{x:parseFloat(t?n[12]:n[4]),y:parseFloat(t?n[13]:n[5])}}this.css("transform","translate3d("+e+"px,"+(i||0)+"px, 0px)")}}(jQuery);
